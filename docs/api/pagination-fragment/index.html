<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/Relay.swift/releases/rss.xml" title="Relay.swift Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Relay.swift/releases/atom.xml" title="Relay.swift Blog Atom Feed"><title data-react-helmet="true">@PaginationFragment | Relay.swift</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="1.0.0"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-1.0.0"><meta data-react-helmet="true" property="og:title" content="@PaginationFragment | Relay.swift"><meta data-react-helmet="true" name="description" content="The @PaginationFragment property wrapper is very similar to a @Fragment, but it supports loading additional items upon request. When using a pagination fragment, you don&#x27;t have to load an entire list of data all at once. You can control when you load more, and you&#x27;ll be able to easily update your UI accordingly."><meta data-react-helmet="true" property="og:description" content="The @PaginationFragment property wrapper is very similar to a @Fragment, but it supports loading additional items upon request. When using a pagination fragment, you don&#x27;t have to load an entire list of data all at once. You can control when you load more, and you&#x27;ll be able to easily update your UI accordingly."><meta data-react-helmet="true" property="og:url" content="https://relay-tools.github.io/Relay.swift/docs/api/pagination-fragment"><link data-react-helmet="true" rel="shortcut icon" href="/Relay.swift/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://relay-tools.github.io/Relay.swift/docs/api/pagination-fragment"><link rel="stylesheet" href="/Relay.swift/styles.62dfcd7f.css">
<link rel="preload" href="/Relay.swift/styles.144f0b80.js" as="script">
<link rel="preload" href="/Relay.swift/runtime~main.1d8c9810.js" as="script">
<link rel="preload" href="/Relay.swift/main.d2f021be.js" as="script">
<link rel="preload" href="/Relay.swift/1.c8555c82.js" as="script">
<link rel="preload" href="/Relay.swift/2.97c26455.js" as="script">
<link rel="preload" href="/Relay.swift/87.b920650e.js" as="script">
<link rel="preload" href="/Relay.swift/88.a1cb33e6.js" as="script">
<link rel="preload" href="/Relay.swift/62e81aa6.b482c105.js" as="script">
<link rel="preload" href="/Relay.swift/17896441.dd035e36.js" as="script">
<link rel="preload" href="/Relay.swift/cf38057b.33e35b44.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/Relay.swift/"><strong class="navbar__title">Relay.swift</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Relay.swift/docs/">1.0.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Relay.swift/docs/next/api/pagination-fragment">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Relay.swift/docs/api/pagination-fragment">1.0.0</a></li></ul></div><a class="navbar__item navbar__link" href="/Relay.swift/docs/knowledge-base">Knowledge base</a><a class="navbar__item navbar__link" href="/Relay.swift/releases/">Releases</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/relay-tools/Relay.swift" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/Relay.swift/"><strong class="navbar__title">Relay.swift</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/Relay.swift/docs/next/api/pagination-fragment">Next</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/Relay.swift/docs/api/pagination-fragment">1.0.0</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/Relay.swift/docs/knowledge-base">Knowledge base</a></li><li class="menu__list-item"><a class="menu__link" href="/Relay.swift/releases/">Releases</a></li><li class="menu__list-item"><a href="https://github.com/relay-tools/Relay.swift" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/Relay.swift/docs/">Relay.swift</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/getting-started/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/getting-started/relay-environment">The Relay environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/getting-started/fetching-data">Fetching data with queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/getting-started/fragments">Composing views with fragments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/getting-started/mutations">Making changes with mutations</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">API reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Relay.swift</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/api/intro-relay">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/api/graphql">GraphQL tagged strings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/api/environment">Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/api/network">Network layer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/api/store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/api/record-source-selector-proxy">RecordSourceSelectorProxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/api/record-proxy">RecordProxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/api/connection-handler">ConnectionHandler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/api/mock-environment">MockEnvironment</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Relay in SwiftUI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Relay.swift/docs/api/intro-relay-swift-ui">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Relay.swift/docs/api/relay-environment-modifier">relayEnvironment()</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Relay.swift/docs/api/relay-environment-wrapper">@RelayEnvironment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Relay.swift/docs/api/query">@Query</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Relay.swift/docs/api/fragment">@Fragment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Relay.swift/docs/api/refetchable-fragment">@RefetchableFragment</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Relay.swift/docs/api/pagination-fragment">@PaginationFragment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Relay.swift/docs/api/mutation">@Mutation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Relay.swift/docs/api/preview-payload">previewPayload()</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Relay.swift/docs/development/contributing">Contributing</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: 1.0.0</span></div><header><h1 class="docTitle_Oumm">@PaginationFragment</h1></header><div class="markdown"><p>The <code>@PaginationFragment</code> property wrapper is very similar to a <a href="/Relay.swift/docs/api/fragment">@Fragment</a>, but it supports loading additional items upon request. When using a pagination fragment, you don&#x27;t have to load an entire list of data all at once. You can control when you load more, and you&#x27;ll be able to easily update your UI accordingly.</p><p>A <code>@PaginationFragment</code> expects your schema to be structured in a specific way to support paging. See the <a href="https://relay.dev/graphql/connections.htm" target="_blank" rel="noopener noreferrer">GraphQL Cursor Connections Specification</a> for more details.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-swift codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">import SwiftUI</span></div><div class="token-line" style="color:#393A34"><span class="token plain">import RelaySwiftUI</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private let userFragment = graphql(&quot;&quot;&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">fragment ToDoList_user on User</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  @refetchable(queryName: &quot;ToDoListPaginationQuery&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  @argumentDefinitions(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    count: { type: &quot;Int&quot;, defaultValue: 10 }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    cursor: { type: &quot;Cursor&quot; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  ) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  todos(first: $count, after: $cursor)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    @connection(key: &quot;ToDoList_todos&quot;) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    edges {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      node {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        id</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        ...ToDoItem_todo</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">struct ToDoList: View {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    @PaginationFragment&lt;ToDoList_user&gt; var user</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    var body: some View {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if let user = user {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            List {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                ForEach(user.todos ?? []) { todo in</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                    ToDoItem(todo: todo)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                if user.isLoadingNext {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                    Text(&quot;Loadingâ€¦&quot;).foregroundColor(.secondary)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                } else if user.hasNext {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                    Button(&quot;Load more tweetsâ€¦&quot;) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                        user.loadNext(10)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="requirements"></a>Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">#</a></h2><p>There are a few special requirements for the fragment in order for it to be valid to use with a <code>@PaginationFragment</code>:</p><ul><li>The fragment must have a <code>@refetchable</code> directive that names a query operation that will be generated to fetch additional data for the fragment. Using <code>@refetchable</code> requires that the fragment be declared on <code>Query</code>, <code>Viewer</code>, or a type that implements the <code>Node</code>. Otherwise, Relay won&#x27;t know where in the graph to fetch the new data from.</li><li>A field in the fragment must have a <code>@connection</code> directive that marks the connection field to use for paging. See the <a href="https://relay.dev/graphql/connections.htm" target="_blank" rel="noopener noreferrer">GraphQL Cursor Connections Specification</a> for more about connections.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="parameters"></a>Parameters<a class="hash-link" href="#parameters" title="Direct link to heading">#</a></h4><ul><li><code>F</code>: A type parameter (surrounded in <code>&lt;&gt;</code>) for the type of the fragment to use. The type will be generated by the Relay compiler with a name matching the fragment name in the GraphQL snippet.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="property-value"></a>Property value<a class="hash-link" href="#property-value" title="Direct link to heading">#</a></h4><p>The <code>@PaginationFragment</code> property will be a read-only optional value with the fields the fragment requests. This value will automatically update and re-render the view when more items are loaded or when the Relay store updates any relevant records.</p><p>The value will also include some additional properties related to paging:</p><ul><li><code>isLoadingNext: Bool</code>: Indicates if there is an in-flight request to load more items from the end of the list.</li><li><code>isLoadingPrevious: Bool</code>: Indicates if there is an in-flight request to load more items from the beginning of the list.</li><li><code>hasNext: Bool</code>: Indicates if there are more items that can be fetched from the end of the list.</li><li><code>hasPrevious: Bool</code>: Indicates if there are more items that can be fetched from the beginning of the list.</li><li><code>loadNext(_ count: Int)</code>: Function that can be called to fetch the next <code>count</code> items from the end of the list.</li><li><code>loadPrevious(_ count: Int)</code>: Function that can be called to fetch the previous <code>count</code> items from the beginning of the list.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-connection-fields-as-collections"></a>Using <code>@connection</code> fields as Collections<a class="hash-link" href="#using-connection-fields-as-collections" title="Direct link to heading">#</a></h2><p>When generating the data types for a pagination fragment, the Relay compiler can make it easier to use your connection by making it usable as a Swift Collection. For example, here are the types generated for the above example <code>ToDoList_user</code> fragment:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-swift codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">extension ToDoList_user {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    public struct Data: Decodable {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        public var todos: TodoConnection_todos?</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        public var id: String?</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        public struct TodoConnection_todos: Decodable, ConnectionCollection {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            public var edges: [TodoEdge_edges?]?</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            public struct TodoEdge_edges: Decodable, ConnectionEdge {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                public var node: Todo_node?</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                public struct Todo_node: Decodable, Identifiable, ToDoItem_todo_Key, ConnectionNode {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                    public var id: String</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                    public var fragment_ToDoItem_todo: FragmentPointer</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The <code>todos</code> field is the <code>@connection</code> field, and has type <code>TodoConnection_todos</code>. The <code>TodoConnection_todos</code> conforms to <code>ConnectionCollection</code>, which makes it usable as a Collection. In general, you can use the <code>todos</code> field as though it were an array, including in a SwiftUI <code>List</code> or <code>ForEach</code>.</p><p>This conformance is only generated when your fragment includes the following structure:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-graphql codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:#d73a49">MyFragment_foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    someItems </span><span class="token directive function" style="color:#d73a49">@connection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        edges </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            node </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In other words, your fragment must have a field with the <code>@connection</code> directive. That field must have an <code>edges</code> field selected, and the <code>edges</code> field must have a <code>node</code> field selected. If those conditions are met, the Relay compiler will make the types for those fields conform to the necessary protocols to be able to use the connection field as a Collection.</p><p>In practice, this means that referring to your paged items in your view is much nicer. Instead of this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-swift codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">List(user.todos?.edges?.compactMap { $0?.node } ?? []) { ... }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>You can just write:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-swift codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">List(user.todos ?? []) { ... }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This gives you the benefits of using GraphQL cursors for paging, but without burdening your view code with worrying about edges and their nodes.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/relay-tools/Relay.swift/edit/main/website/versioned_docs/version-1.0.0/api/pagination-fragment.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Relay.swift/docs/api/refetchable-fragment"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« @RefetchableFragment</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Relay.swift/docs/api/mutation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">@Mutation Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#example" class="table-of-contents__link">Example</a></li><li><a href="#requirements" class="table-of-contents__link">Requirements</a></li><li><a href="#using-connection-fields-as-collections" class="table-of-contents__link">Using <code>@connection</code> fields as Collections</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Matt Moriarity.</div></div></div></footer></div>
<script src="/Relay.swift/styles.144f0b80.js"></script>
<script src="/Relay.swift/runtime~main.1d8c9810.js"></script>
<script src="/Relay.swift/main.d2f021be.js"></script>
<script src="/Relay.swift/1.c8555c82.js"></script>
<script src="/Relay.swift/2.97c26455.js"></script>
<script src="/Relay.swift/87.b920650e.js"></script>
<script src="/Relay.swift/88.a1cb33e6.js"></script>
<script src="/Relay.swift/62e81aa6.b482c105.js"></script>
<script src="/Relay.swift/17896441.dd035e36.js"></script>
<script src="/Relay.swift/cf38057b.33e35b44.js"></script>
</body>
</html>