<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/Relay.swift/releases/rss.xml" title="Relay.swift Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Relay.swift/releases/atom.xml" title="Relay.swift Blog Atom Feed"><title data-react-helmet="true">Differences from Relay in JavaScript | Relay.swift</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="1.1.0"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-1.1.0"><meta data-react-helmet="true" property="og:title" content="Differences from Relay in JavaScript | Relay.swift"><meta data-react-helmet="true" name="description" content="Relay.swift is not intended to replace the official Relay framework for JavaScript. We love Relay, and we want to bring the same benefits that it brings to building web apps to a new environment: building native apps for Apple platforms with Swift."><meta data-react-helmet="true" property="og:description" content="Relay.swift is not intended to replace the official Relay framework for JavaScript. We love Relay, and we want to bring the same benefits that it brings to building web apps to a new environment: building native apps for Apple platforms with Swift."><meta data-react-helmet="true" property="og:url" content="https://relay-tools.github.io/Relay.swift/docs/knowledge-base/differences-from-javascript"><link data-react-helmet="true" rel="shortcut icon" href="/Relay.swift/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://relay-tools.github.io/Relay.swift/docs/knowledge-base/differences-from-javascript"><link rel="stylesheet" href="/Relay.swift/styles.62dfcd7f.css">
<link rel="preload" href="/Relay.swift/styles.b64df67e.js" as="script">
<link rel="preload" href="/Relay.swift/runtime~main.dd5e0709.js" as="script">
<link rel="preload" href="/Relay.swift/main.fe89b934.js" as="script">
<link rel="preload" href="/Relay.swift/1.46ef3b44.js" as="script">
<link rel="preload" href="/Relay.swift/2.87a3c185.js" as="script">
<link rel="preload" href="/Relay.swift/121.1bf8ea46.js" as="script">
<link rel="preload" href="/Relay.swift/122.c9f6834b.js" as="script">
<link rel="preload" href="/Relay.swift/e15bcb33.7e8a1d66.js" as="script">
<link rel="preload" href="/Relay.swift/17896441.e4122df4.js" as="script">
<link rel="preload" href="/Relay.swift/c7a2de5e.76ff4fb8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/Relay.swift/"><strong class="navbar__title">Relay.swift</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Relay.swift/docs/">1.1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Relay.swift/docs/next/knowledge-base/differences-from-javascript">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Relay.swift/docs/knowledge-base/differences-from-javascript">1.1.0</a></li><li><a class="dropdown__link" href="/Relay.swift/docs/1.0.0/knowledge-base/differences-from-javascript">1.0.0</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Relay.swift/docs/knowledge-base">Knowledge base</a><a class="navbar__item navbar__link" href="/Relay.swift/releases/">Releases</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/relay-tools/Relay.swift" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/Relay.swift/"><strong class="navbar__title">Relay.swift</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/Relay.swift/docs/next/knowledge-base/differences-from-javascript">Next</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/Relay.swift/docs/knowledge-base/differences-from-javascript">1.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/Relay.swift/docs/1.0.0/knowledge-base/differences-from-javascript">1.0.0</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/Relay.swift/docs/knowledge-base">Knowledge base</a></li><li class="menu__list-item"><a class="menu__link" href="/Relay.swift/releases/">Releases</a></li><li class="menu__list-item"><a href="https://github.com/relay-tools/Relay.swift" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: 1.1.0</span></div><header><h1 class="docTitle_Oumm">Differences from Relay in JavaScript</h1></header><div class="markdown"><p>Relay.swift is not intended to replace the official Relay framework for JavaScript. We love Relay, and we want to bring the same benefits that it brings to building web apps to a new environment: building native apps for Apple platforms with Swift.</p><p>Relay.swift was created by spending a bunch of time heads down in Relay&#x27;s source code, understanding how it does what it does. For the most part, the API should be the same or similar to the original. When things diverge in a significant way, it&#x27;s usually because of fundamental underlying differences in the two environments. This page explains some of those differences.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="relayswift-vs-relay"></a>Relay.swift vs. Relay<a class="hash-link" href="#relayswift-vs-relay" title="Direct link to heading">#</a></h2><p>Relay is written in JavaScript using Flow to provide a type system. Flow is very different from Swift&#x27;s type system because for the most part, Flow types are <strong>structural</strong>. This means that a value is of a certain type based on the structure of the value. As long as two types require the same structure, they are effectively the same type: if a value conforms to one of them, it conforms to the other. Swift doesn&#x27;t support structural typing at all: instead, Swift has exclusively <strong>nominal</strong> types. In Swift, the name of a type matters, and values know the name of their type. This means that if we define two <code>struct</code>s in Swift with the exact same fields, we still can&#x27;t treat a value of one of those types as the other type.</p><p>Relay takes advantage of structural types in Flow both in its internals and in the type definitions that its compiler generates for query data:</p><ul><li>It is able to use plain-old JavaScript objects to represent query data and enforce types on the structure of those objects at the boundary between the Relay framework and the app without any explicit conversion code.</li><li>For nested fields in query data, Relay only needs to generate named types for the top-level: the structure of nested fields is embedded inside those types without needing to named and defined elsewhere.</li><li>For input types and enums, which can be reused across many queries, mutations, and fragments, Relay can generate types in each file that uses them. Because the structure of the types match, values can be used interchangeably with them.</li></ul><p>Relay.swift has to take a different approach, both to how it stores records and how it generates types, to work within the bounds of nominal typing:</p><ul><li>Internally, Relay.swift stores records with dictionaries, similar to the JS objects Relay uses, because the shape of records is heterogenous and not known ahead of time. But when data is read out of the store, it has to be converted into named Swift structs that are generated by the Relay compiler. This is only way to express the types of specific fields in Swift, so that consumers of the data can only access the fields specified in the query.</li><li>Every nested field in those structs needs its own named type as well. The compiler can&#x27;t just generate these based on the GraphQL schema and reuse them either, because queries may alias fields or select different fields for the same object type in different places. To handle this, nested fields each get a nested struct type named after both the type name in the schema and the field name in the query, preventing collisions.</li><li>This approach doesn&#x27;t work for input types and enums, because their values should be usable in any place that expects them. If two different fields in a query are of the same enum type, values from one of those fields should be comparable to values from the other. For these types, the compiler generates an <code>enum</code> for GraphQL enums and a <code>struct</code> for GraphQL input types the first time it generates a file that uses the type. Swift thankfully doesn&#x27;t care which file the type is in: anything in the module can use it.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="relayswiftui-vs-react-relay"></a>RelaySwiftUI vs. react-relay<a class="hash-link" href="#relayswiftui-vs-react-relay" title="Direct link to heading">#</a></h2><p>There are other differences between Relay.swift and Relay on the UI side.</p><p>First, while in Relay.swift you still write your queries inside tagged strings in your source code, they can&#x27;t actually stand in for the compiled version of the query. Relay uses a Babel plugin to transform tagged <code>graphql</code> string literals into imports of the compiled version from the Relay compiler, but Swift doesn&#x27;t have an equivalent way of doing arbitrary transforms to code as it is compiled.</p><p>Instead, you still tag your GraphQL queries in Relay.swift using the <code>graphql</code> function, but it only serves to flag the query to the Relay compiler. Once the compiled version of the query is generated, you can reference the generated type explicitly when calling into Relay. This is the easiest way to preserve type information about the query variables and response.</p><p>Relay.swift uses property wrappers to achieve a similar effect in SwiftUI to what hooks do in React. If you&#x27;ve tried the experimental hooks API for Relay, Relay.swift&#x27;s property wrappers should feel at least a little familiar. They&#x27;re a little more finicky about how you use them, but for the most part, we can accomplish a lot of the same things with property wrappers in SwiftUI that React libraries can do with hooks.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/relay-tools/Relay.swift/edit/main/website/versioned_docs/version-1.1.0/knowledge-base/differences-from-javascript.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#relayswift-vs-relay" class="table-of-contents__link">Relay.swift vs. Relay</a></li><li><a href="#relayswiftui-vs-react-relay" class="table-of-contents__link">RelaySwiftUI vs. react-relay</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Matt Moriarity.</div></div></div></footer></div>
<script src="/Relay.swift/styles.b64df67e.js"></script>
<script src="/Relay.swift/runtime~main.dd5e0709.js"></script>
<script src="/Relay.swift/main.fe89b934.js"></script>
<script src="/Relay.swift/1.46ef3b44.js"></script>
<script src="/Relay.swift/2.87a3c185.js"></script>
<script src="/Relay.swift/121.1bf8ea46.js"></script>
<script src="/Relay.swift/122.c9f6834b.js"></script>
<script src="/Relay.swift/e15bcb33.7e8a1d66.js"></script>
<script src="/Relay.swift/17896441.e4122df4.js"></script>
<script src="/Relay.swift/c7a2de5e.76ff4fb8.js"></script>
</body>
</html>